<!DOCTYPE html>
<html>

	<head>
		<!-- Standard Meta -->
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
		<link rel="shortcut icon" type="image/png" href="assets/images/fav.png"/>
		<!-- Site Properties -->
		<title>Probe Havuzu</title>


		<link rel="stylesheet" href="./jquery/jquery-plugins/css/jquery-ui.css">
		<link rel="stylesheet" href="./semanticui/semantic.min.css">
		<link rel="stylesheet" href="./datatables/datatables.min.css">
		
		<script src="./jquery/jquery-3.3.1.js"></script>
		<script src="./jquery/jquery-plugins/js/jquery-ui.js"></script>
		<script src="./jquery/jquery-plugins/js/jquery.cookie-1.4.1.js"></script>
		<script src="./semanticui/semantic.min.js"></script>
		<script src="./datatables/datatables.min.js"></script>

		<script src="./js/moment-with-locales.js"></script>
		<script src="./datatables/datetime.js"></script>
		<script src="./datatables/widgetbase.js"></script>

		<script src="./js-xlsx/xlsx.full.min.js"></script>
		<script src="./js/FileSaver.js"></script>


		<script src="acm/acm-ui-auth.js"></script>
		<script src="acm/acm-data-handler.js"></script>
		<script src="acm/acm-page-handler.js"></script>
		<script src="acm/acm-dialog.js"></script>
		<script src="acm/acm-form.js"></script>
		<script src="acm/acm-input.js"></script>
		<script src="acm/acm-textarea.js"></script>
		<script src="acm/acm-table.js"></script>
		<script src="acm/acm-container.js"></script>
		<script src="acm/acm-img.js"></script>
		<script src="acm/acm-link.js"></script>
		<script src="acm/acm-dropdown.js"></script>
		<script src="acm/acm-cbox.js"></script>
		<script src="acm/acm-list.js"></script>
		<script src="acm/acm-modal.js"></script>
		<script src="acm/acm-xlsx.js"></script>
		<style>
			.content.container {
				margin-top:100px;
			}
			.redbp {
				background-color: #f1d7d7;
				color: #9f3a38;
			}
			div.absolute {
				position: absolute;
				top: 350px;
				left: 60px;
			}
			.fixeddiv{
				position: fixed !important;
				float: left;
				width: inherit;
				margin-top: 4em;
			}
			.sep{
				margin-bottom: 10px;
			}			
		</style>
	</head>

	<body>

	<acmus id="navbarcontainer"></acmus>

	<div class="ui grid">
		<div class="one wide column">
		</div>
		<div class="three wide column">
			<div class="fixeddiv">
				<div class="ui card">
					<div class="content">
						<div class="header">Seçilenler</div>
					</div>
					<div class="content">
						<div class="ui small feed">
							<div class="event">
								<div class="content">
									<div class="summary">
										 <p><strong>Seçilen:</strong><span id="secilen">0</span></p>
									</div>
								</div>
							</div>
							<div class="event">
								<div class="content">
									<div class="summary">
										 <p><strong>Sıradaki:</strong><span id="siradaki">0</span></p>
									</div>
								</div>
							</div>
							<div class="event">
								<div class="content">
									<div class="summary">
										 <p><strong>Filtrelenmiş:</strong><span id="filter">0</span></p>
									</div>
								</div>
							</div>
							<div class="event">
								<div class="content">
									<div class="summary">
										 <p><strong>Toplam:</strong><span id="total">0</span></p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="ui card">
					<div class="content">

							<div class= "sep">
							<span>5' Mod: </span>
							<div id="modf"></div>
							</div>
							
							<div class= "sep">
							<span>3' Mod: </span>
							<div id="modt"></div>
							</div>
												
							<div class= "sep">
							<div class="ui big grey fluid button" id="syntheses_button">Senteze Al</div>
							</div>
							
					</div>
				</div>
			</div>
		</div>
		<div class="one wide column">
		</div>
		<div class="eleven wide column">
			<div class="ui vertically divided grid content container">
				<div class="row">
				  <div class="ui large header">
					<i class="star icon"></i>
					<div class="content">
					  Probe Havuzu
					</div>
				  </div>
				</div>
				<div class="row">
				  <div class="column">
					<div id="probepooltable"></div>
				  </div>
				</div>
				<div class="four column row">
				  <div id="button_container" class="left floated column"></div>
				  <div id="button2_container" class="right floated column"></div>
				</div>
			</div>
		</div>
	</div>
	
	
	<!--
  <div class="ui vertically divided grid content container">
    <div class="row">
      <div class="ui large header">
        <i class="star icon"></i>
        <div class="content">
          Probe Havuzu
        </div>
      </div>
    </div>
    <div class="row">
      <div class="four wide column">
				
        <div id="modf"></div>
      </div>
      <div class="four wide column">
				
        <div id="modt"></div>
      </div>
      <div class="four wide column">
        </br><div id="modpri"></div>
      </div>
      <div class="four wide column">
        <div class="ui big grey fluid button" id="syntheses_button">Senteze Al</div>
      </div>
    </div>
    <div class="row">
      <div class="column">
        <div id="probepooltable"></div>
      </div>
    </div>
    <div class="four column row">
      <div id="button_container" class="left floated column"></div>
      <div id="button2_container" class="right floated column"></div>
    </div>
  </div>
	-->
</body>

<script>

$(document).on("pagecreated", function(){

  // Add buttons 
  /*new $.fn.dataTable.Buttons($.getWidget('primerpooltable').table, {
    name: "row_control",
    buttons: [
      { extend: "create", editor: $.getWidget('primerpooltable').editor, text: 'Yeni' },
      { extend: "edit", editor: $.getWidget('primerpooltable').editor, text: 'Güncelle' },
      { extend: "remove", editor: $.getWidget('primerpooltable').editor, text: 'Sil' }
    ]
  });*/
  
  /*
  new $.fn.dataTable.Buttons($.getWidget('probepooltable').table, {
    name: "export_control",
    buttons: [
      { text: 'Excel', attr: { id: 'excel_download' } },
      { extend: 'pdfHtml5' },
      { extend: 'print', text: 'Yazdır' }
    ]
  });

  // Place buttons to containers
  //$.getWidget('primerpooltable').table.DataTable().buttons(0, null).container().appendTo($('div.eight.column:eq(0)', $.getWidget('primerpooltable').table.DataTable().table().container()));
  $.getWidget('primerpooltable').table.DataTable().buttons(0, null).container().appendTo($('#button_container'));
  */
	$.getWidget('probepooltable').datatable.on( 'draw.dt', function () {
		$("#total").html($.getWidget('probepooltable').datatable.page.info().recordsTotal);
		$("#filter").html($.getWidget('probepooltable').datatable.page.info().recordsDisplay);
	});

    $.formAction({ type: "probe"}, "synthService", function (res) {
		$("#siradaki").html(res.count);
	});
  
	$.getWidget('probepooltable').datatable.on("select", function() {
		$("#secilen").html($.getWidget("probepooltable").datatable.rows( { selected: true } ).count());
	});
	
	$.getWidget('probepooltable').datatable.on("deselect", function() {
		$("#secilen").html($.getWidget("probepooltable").datatable.rows( { selected: true } ).count());
	});



	
  $("#modf").ddown({
    oncreate: true,
    datasource: "ddserv1",
    div: "ui labeled selection fluid dropdown icon",
    header: [
      { span: "text" },
      { icon: "dropdown icon" }
    ],
		semanticOptions: {
			onChange: function(value, text, $choice){
				var theCol = $.getWidget("probepooltable").datatable.column(3);
				if(theCol.search() !== text && value != 0) theCol.search(text).draw();
				else if(theCol.search() !== text && value == 0) theCol.search("").draw();
			}
		}
  });
	
  $("#modt").ddown({
    oncreate: true,
    datasource: "ddserv1",
    div: "ui labeled selection fluid dropdown icon",
    header: [
      { span: "text" },
      { icon: "dropdown icon" }
    ],
		semanticOptions: {
			onChange: function(value, text, $choice){
				var theCol = $.getWidget("probepooltable").datatable.column(5);
				if(theCol.search() !== text && value != 0) theCol.search(text).draw();
				else if(theCol.search() !== text && value == 0) theCol.search("").draw();
			}
		}
  });


 
  $("#modf").ddown("set", [
			{
				id: 0,
				val: "Hepsi"
			},
			{
				id: 1,
				val: "/5FAM/"
			},
			{
				id: 2,
				val: "/5HEX/"
			},
			{
				id: 3,
				val: "/5TAMRA/"
			},
			{
				id: 4,
				val: "/5JOE/"
			}, 
			{
				id: 5,
				val: "/5CY3/"
			}, 
			{
				id: 6,
				val: "/5CY5/"
			}, 
			{
				id: 7,
				val: "/5TET/"
			}, 
			{
				id: 8,
				val: "/5YakYel/"
			}, 
			{
				id: 9,
				val: "/5Phos/"
			}
		]);

  $("#modt").ddown("set", [
	{
		id: 0,
		val: "Hepsi"
	},
    {
		id: 1,
      val: "/3TAMRA/"
    }, {
		id: 2,
      val: "/BHQ-1/"
    }, {
		id: 3,
      val: "/BHQ-2/"
    }, {
		id: 4,
      val: "/Dab/"
    }, {
		id: 5,
      val: "/3ATTO550/"
    }
  ]);
	
	/*$("#modpri").cbox({
		label: "Modifiye Primerler",
		semanticOptions: {
			onChange: function() {
				var colFifth = $.getWidget("probepooltable").datatable.column(7);
				var colThird = $.getWidget("probepooltable").datatable.column(5);
				if($(this).is(":checked")) {
					colFifth.search("^\\s*(\\w+\\s*)+$", true, false).draw();
					colThird.search("^\\s*(\\w+\\s*)+$", true, false).draw();
				} else {
					colFifth.search("").draw();
					colThird.search("").draw();
				}
			}
		}
	});*/
	
	$("#syntheses_button").click(function(){
	
		
	
		$.getWidget("probepooltable").editor.edit($.getWidget("probepooltable").datatable.rows( { selected: true } ).indexes(),false).set("synthid",0).submit(function(){
		
		
			//window.location.href = "productionSynthListProbe.html";
			
			// TO DO SHOW message
			$.getWidget("probepooltable").datatable.rows( { selected: true } ).remove().draw()
			$("#secilen").html("0");
			$.formAction({ type: "probe"}, "synthService", function (res) {
				$("#siradaki").html(res.count);
			});
		}, function() {
			//console.log("not ok");
			//handle error
		});	
	});

});

</script>
<html>