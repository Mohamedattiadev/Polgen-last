<!DOCTYPE html>
<html>

<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<link rel="shortcut icon" type="image/png" href="assets/images/fav.png" />
  <!-- Site Properties -->
  <title>Kargo Giriş</title>


  <link rel="stylesheet" href="./jquery/jquery-plugins/css/jquery-ui.css">
  <link rel="stylesheet" href="./semanticui/semantic.min.css">
  <link rel="stylesheet" href="./datatables/datatables.min.css">
	<link rel="stylesheet" href="./css/general.css">
   
  <script src="./jquery/jquery-3.3.1.js"></script>
	<script src="./jquery/jquery-plugins/js/jquery-ui.js"></script>
	<script src="./jquery/jquery-plugins/js/jquery.cookie-1.4.1.js"></script>
	<script src="./semanticui/semantic.min.js"></script>
	<script src="./datatables/datatables.min.js"></script>

	<script src="./js/moment-with-locales.js"></script>
	<script src="./datatables/datetime.js"></script>
	<script src="./datatables/widgetbase.js"></script>

	<script src="./js-xlsx/xlsx.full.min.js"></script>
	<script src="./js/FileSaver.js"></script>

	<script src="acm/acm-ui-auth.js"></script>
	<script src="acm/acm-data-handler.js"></script>
	<script src="acm/acm-page-handler.js"></script>
	<script src="acm/acm-table.js"></script>
	<script src="acm/acm-xlsx.js"></script>
	<script src="acm/acm-file.js"></script>
	<script src="acm/acm-thumbnail.js"></script>
	<script src="acm/acm-modal.js"></script>
	<script src="acm/acm-dropdown.js"></script>
	<script src="acm/acm-container.js"></script>
	<script src="acm/acm-img.js"></script>
	<script src="acm/acm-link.js"></script>
	<script src="acm/acm-input.js"></script>
	<script src="acm/acm-dialog.js"></script>
	<script src="acm/acm-modal.js"></script>
	
	<style>
		.content.container {
			margin-top:100px;
		}
		.tablecontent {
			cursor:pointer;
			color:#33E;
			text-decoration:underline;
		}
		.tablecontent:hover {
			text-decoration:none;
			text-shadow: 1px 1px 1px #555;
		}
		.ui.fullscreen.modal {
			position: static !important;
		}
	</style>
	
</head>

<body>

  <acmus id="navbarcontainer"></acmus>
  <acmus id="pagecontainer"></acmus>
  <acmus id="dialogcontainer"></acmus>
</body>

<script>

	var rowid = 1;
	var rowtype = "primer";
	var ordernum = "order1";
	var orderdate = "01-01-2019";
	var ordermail = "contact@acmus.co";
	
	var pagewidgets = {
		container: {
			type: "container",
			selector: "#pagecontainer",
			options: {
				div: "below_navbar ui content container",
				structure: [
					{div: "ui vertically divided grid", structure:[
						{div: "row",structure:[
							{div: "ui large header",structure:[
								{icon: "noclass", i:"Truck icon"},
								{div:"content",html:"Kargo Giriş"}
							]}
						]},
						{div: "row",structure:[
							{div: "column", structure:[
								{div: "#ordertable"}
							]}
						]},
					]}
				]
			}
		},
		ordertable: {
			type: "table",
			selector: "#ordertable",
			options: {
				datasource: "editorService",
				oncreate: true,
				fetchparams: {
					table: "orders",
					columns: ["id","type","ordernum", "date","productsnum","completed","approval"],
					join: [
						{table:"users", foreign:"userid",target:"userid", columns : ["mail"]},
					],
					filter: {
						where: {
							orderdone: true,
							approval: true,
							"orders.id": {
								op: "not",
								val: 0
							}
						},
						limit:500
					},
					order: ['orders.date DESC'],
				},
				table: "ui celled table",
				datatable: {
					order: [],
					lengthChange: true,
					responsive: true,
					select: false,
					//dom: '<"top">Brt<"bottom"><"clear">',
					columns: [
						{ data: "id", visible: false, type: "hidden" },
						{ data: "date", visible: false, type: "hidden" },
						{ data: "user.mail", visible: false, type: "hidden" },
						{ data: "ordernum", name: "ordernum", title: "Sipariş No", render : function (data, type, row, meta) {
							var elm = $(document.createElement("a")).addClass("item").css('cursor', 'pointer').html(data);
							elm.click(function () {
								$.cookie("tempvar", JSON.stringify(row));
								window.location.href = "cargodetails.html";
							});
							$($("#" + meta.settings.sTableId).DataTable().cell(meta.row, meta.col).node()).empty().append(elm);
							return data;
						}},
						{ data: "type", name: "type", title: "Tip", render: "type"},
						{ data: "date", name: "date", title: "Sipariş Tarihi", render:"momentdate"},
						{ data: "productsnum", name: "productsnum", title: "Ürün Sayısı"},
						{ data: "completed", title: "% Tamamlanan", render: "pbar" },
						{ data: "approval", name: "approval" ,title: "Durum", render: "appr" }
					],
				},
				/*
				editor: {
					allowed: ["id",],
					inline: {
						submit: "allIfChanged"
					},
					idSrc: 'id',
				}*/
			}
		}
	};
	
	var firstcreate = true;
	$(document).on("pagecreated",function() {
		if (firstcreate) {
			firstcreate = false;
			$.createWidgets(pagewidgets);

			

		}

	});

	

</script>
<html>